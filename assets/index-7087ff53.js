import{a4 as v,d as re,r as k,D as J,G as K,ah as me,a_ as O,_ as de,e as R,m as z,p as j,x as T,y as Z,N as ee,O as ue,R as L,t as x,W as ne,b as Ve,q as N,w as E,f as pe,T as Ne,F as Ae,aj as Pe,U as w,Q as Y}from"./index-95102025.js";import{d as se,c as ce,f as Re,a as ie,w as Be}from"./components-ee7ab657.js";import{p as te}from"./shared-01522925.js";import{d as De}from"./index-ea9abee8.js";import{u as ze,b as fe,_ as Le,c as je,a as Fe}from"./index-3a6c1408.js";import{A as W}from"./appType-d8c1e874.js";const P=["12","1","2","3","4","5","6","7","8","9","10","11"],V=["00","13","14","15","16","17","18","19","20","21","22","23"],le=["00","05","10","15","20","25","30","35","40","45","50","55"],Oe={modelValue:String,elevation:{type:[Boolean,Number,String],default:!1},color:String,headerColor:String,format:{type:String,default:"ampm"},allowedTime:Object,min:String,max:String,useSeconds:Boolean,readonly:Boolean,"onUpdate:modelValue":se(),onChange:se()},ve=(e,t)=>e==="24hr"||t==="am",oe=(e,t,C)=>{const d=P.findIndex(u=>v(u)===v(C)),f=ve(e,t)?C:V[d];return{hourStr:f,hourNum:v(f)}},p=e=>{const[t,C,d]=e.split(":");return{hour:v(t),minute:v(C),second:v(d)}},he=e=>{var B,D;const{time:t,format:C,ampm:d,hour:f,max:u,min:o,disableHour:r}=e,{hourStr:F,hourNum:A}=oe(C,d,f);let M=!1,U=!1;if(r.includes(F))return!0;if(u&&!o){const{hour:g,minute:n}=p(u);M=g===A&&t>n}if(!u&&o){const{hour:g,minute:n}=p(o);M=g===A&&t<n}if(u&&o){const{hour:g,minute:n}=p(u),{hour:a,minute:l}=p(o);M=a===A&&t<l||g===A&&t>n}return(B=e.allowedTime)!=null&&B.minutes&&(U=(D=e.allowedTime)==null?void 0:D.minutes(t)),M||U},ge=e=>{var D,g;const{time:t,format:C,ampm:d,hour:f,minute:u,max:o,min:r,disableHour:F}=e,{hourStr:A,hourNum:M}=oe(C,d,f);let U=!1,B=!1;if(F.includes(A))return!0;if(o&&!r){const{hour:n,minute:a,second:l}=p(o);U=n===M&&a<u||a===u&&t>l}if(!o&&r){const{hour:n,minute:a,second:l}=p(r);U=n===M&&a>u||a===u&&t>l}if(o&&r){const{hour:n,minute:a,second:l}=p(o),{hour:i,minute:y,second:H}=p(r);U=n===M&&a<u||i===M&&y>u||n===M&&a===u&&t>l||i===M&&y===u&&t<H}return(D=e.allowedTime)!=null&&D.seconds&&(B=(g=e.allowedTime)==null?void 0:g.seconds(t)),U||B},{n:qe,classes:Ee}=ce("time-picker"),Xe=re({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,{emit:t}){const C=k(null),d=k([]),f=k([]),u=J(()=>({transform:`rotate(${v(e.rad)}deg)`,height:e.isInner&&e.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:A(),borderColor:A()})),o=J(()=>{if(e.rad===void 0)return;const n=e.rad/30;return n>=0?n:n+12}),r=J(()=>e.type==="hour"?P:le),F=(n,a)=>{n=n??(e.type==="minute"?e.time.minute:e.time.second);const l=e.type==="minute"?he:ge,i={time:v(n),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:v(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:d.value};return a&&e.type==="minute"&&Reflect.deleteProperty(i,"minute"),l(i)},A=()=>{if(o.value===void 0)return e.color;const n=e.isInner?V[o.value]:r.value[o.value];return r.value===le?F()?"#bdbdbd":e.color:U(n)?"#bdbdbd":e.color},M=(n,a)=>a?o.value===n&&e.isInner:o.value===n&&(!e.isInner||e.type!=="hour"),U=n=>{if(e.type==="hour"){if(ve(e.format,e.ampm))return d.value.includes(n);const a=P.findIndex(l=>l===n);return f.value.includes(a)}return F(n,!0)},B=(n,a,l)=>{const i=2*Math.PI/12*n-Math.PI/2,y=50*(1+Math.cos(i)),H=50*(1+Math.sin(i)),h=()=>M(n,l)?U(a)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:I,color:_}=h();return{left:`${y}%`,top:`${H}%`,backgroundColor:I,color:_}},D=()=>{const{width:n,height:a}=me(C.value);return{width:n,height:a}},g=()=>{if(o.value===void 0)return;const n=e.ampm==="am"?P:V;return te(n[o.value],2,"0")};return K([o,()=>e.isInner],([n,a],[l,i])=>{if(n===l&&a===i||e.type!=="hour"||o.value===void 0)return;const H=a?V[o.value]:g(),h=e.useSeconds?`:${e.time.second}`:"",I=`${H}:${e.time.minute}${h}`;e.preventNextUpdate||t("update",I),t("change-prevent-update")}),K(()=>e.rad,(n,a)=>{if(e.type==="hour"||n===void 0||a===void 0)return;const l=n/6>=0?n/6:n/6+60,i=a/6>=0?a/6:a/6+60;if(l===i)return;let y;const{hourStr:H}=oe(e.format,e.ampm,e.time.hour);if(e.type==="minute"){const h=O().minute(l).format("mm"),I=e.useSeconds?`:${e.time.second}`:"";y=`${H}:${h}${I}`}if(e.type==="second"){const h=O().second(l).format("ss"),I=e.useSeconds?`:${h}`:"";y=`${H}:${e.time.minute}${I}`}t("update",y)}),K([()=>e.max,()=>e.min,()=>e.allowedTime],([n,a,l])=>{if(d.value=[],n&&!a){const{hour:i}=p(n),y=P.filter(h=>v(h)>i),H=V.filter(h=>v(h)>i);d.value=[...y,...H]}if(!n&&a){const{hour:i}=p(a),y=P.filter(h=>v(h)<i),H=V.filter(h=>v(h)<i);d.value=[...y,...H]}if(n&&a){const{hour:i}=p(n),{hour:y}=p(a),H=P.filter(I=>v(I)<y||v(I)>i),h=V.filter(I=>v(I)<y||v(I)>i);d.value=[...H,...h]}if(l!=null&&l.hours){const{hours:i}=l,y=P.filter(h=>!i(v(h))),H=V.filter(h=>!i(v(h)));d.value=[...new Set([...d.value,...y,...H])]}f.value=d.value.map(i=>V.findIndex(y=>i===y)).filter(i=>i>=0)},{immediate:!0}),{n:qe,classes:Ee,hours24:V,timeScales:r,inner:C,handStyle:u,disableHour:d,isActive:M,isDisable:U,getSize:D,getStyle:B,activeItemIndex:o}}});function Ye(e,t,C,d,f,u){return R(),z("div",{class:T(e.n("clock"))},[j("div",{class:T(e.n("clock-hand")),style:Z(e.handStyle)},null,6),(R(!0),z(ee,null,ue(e.timeScales,(o,r)=>(R(),z("div",{class:T(e.classes(e.n("clock-item"),[e.isActive(r,!1),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:Z(e.getStyle(r,o,!1))},L(o),7))),128)),e.format==="24hr"&&e.type==="hour"?(R(),z("div",{key:0,class:T(e.n("clock-inner")),ref:"inner"},[(R(!0),z(ee,null,ue(e.hours24,(o,r)=>(R(),z("div",{class:T(e.classes(e.n("clock-item"),[e.isActive(r,!0),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:Z(e.getStyle(r,o,!0))},L(o),7))),128))],2)):x("",!0)],2)}const We=de(Xe,[["render",Ye]]),{name:Ge,n:Qe,classes:Je}=ce("time-picker"),Ke=re({name:Ge,components:{Clock:We},props:Oe,setup(e){const t=k(null),C=k(null),d=k(null),f=k(!1),u=k(!1),o=k(!1),r=k(!1),F=k(!1),A=k(!1),M=k(!1),U=k(0),B=k(0),D=k(),g=k("hour"),n=k("am"),a=k({hour:"00",minute:"00",second:"00"}),l=ne({x:0,y:0}),i=ne({x:[],y:[]}),y=J(()=>g.value==="hour"?D.value:g.value==="minute"?U.value:B.value);K(()=>e.modelValue,s=>{if(s){const{hour:m,minute:c,second:b}=p(s),$=O().hour(m).format("hh"),S=O().hour(m).format("HH"),q=O().minute(c).format("mm"),Q=O().second(b).format("ss");D.value=($==="12"?0:v($))*30,U.value=v(q)*6,B.value=v(Q)*6,a.value=Se(s),e.format!=="24hr"&&(n.value=te(`${m}`,2,"0")===S&&V.includes(S)?"pm":"am"),f.value=e.format==="24hr"&&V.includes(S)}},{immediate:!0});function H(s){ie(e["onUpdate:modelValue"],s),ie(e.onChange,s)}function h(s){return s*57.29577951308232}function I(s){r.value=!1,M.value=!1,g.value=s}function _(s){const{disableHour:m}=d.value,c=P.findIndex(S=>v(S)===v(a.value.hour)),b=s==="am"?P:V;return[...b.slice(c),...b.slice(0,c)].find((S,q)=>(u.value=q!==0,!m.includes(S)))}function be(s){if(e.readonly)return;n.value=s;const m=_(s);if(!m)return;const c=e.useSeconds?`:${a.value.second}`:"",b=`${te(m,2,"0")}:${a.value.minute}${c}`;H(b)}function ae(s,m){const c=s>=i.x[0]&&s<=i.x[1],b=m>=i.y[0]&&m<=i.y[1];return c&&b}function Se(s){const m=e.format==="24hr"?"HH":"hh",{hour:c,minute:b,second:$}=p(s);return{hour:O().hour(c).format(m),minute:O().minute(b).format("mm"),second:O().second($).format("ss")}}function He(s){const m=s/30;return m>=0?m:m+12}function ke(){const{width:s,height:m}=d.value.getSize(),c=l.x-s/2-8,b=l.x+s/2+8,$=l.y-m/2-8,S=l.y+m/2+8;return{rangeXMin:c,rangeXMax:b,rangeYMin:$,rangeYMax:S}}function Me(s,m,c){const{disableHour:b}=d.value;o.value=ae(s,m);const $=Math.round(c/30)*30+90,S=He($),q=f.value?P[S]:V[S];if(b.includes(q)||(f.value=e.format==="24hr"?ae(s,m):!1),f.value!==o.value)return;const Q=f.value||n.value==="pm"?V[S]:P[S];A.value=b.includes(Q),!A.value&&(D.value=$,r.value=!0)}function $e(s){const{disableHour:m}=d.value,c=Math.round(s/6)*6+90,$={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:n.value,hour:a.value.hour,max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};M.value=he($),!M.value&&(U.value=c,F.value=!0)}function we(s){const{disableHour:m}=d.value,c=Math.round(s/6)*6+90,$={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:n.value,hour:a.value.hour,minute:v(a.value.minute),max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};ge($)||(B.value=c)}function Ce(){const{left:s,top:m,width:c,height:b}=me(t.value);if(l.x=s+c/2,l.y=m+b/2,g.value==="hour"&&e.format==="24hr"){const{rangeXMin:$,rangeXMax:S,rangeYMin:q,rangeYMax:Q}=ke();i.x=[$,S],i.y=[q,Q]}}function Te(s){if(s.preventDefault(),e.readonly)return;Ce();const{clientX:m,clientY:c}=s.touches[0],b=m-l.x,$=c-l.y,S=Math.round(h(Math.atan2($,b)));g.value==="hour"?Me(m,c,S):g.value==="minute"?$e(S):we(S)}function Ue(){if(!e.readonly){if(g.value==="hour"&&r.value){g.value="minute";return}g.value==="minute"&&e.useSeconds&&F.value&&(g.value="second")}}function Ie(){u.value=!1}return{getRad:y,time:a,container:t,inner:d,picker:C,isInner:f,type:g,ampm:n,isPreventNextUpdate:u,n:Qe,classes:Je,moveHand:Te,checkPanel:I,checkAmpm:be,end:Ue,update:H,changePreventUpdate:Ie,formatElevation:Re}}});const Ze=j("span",null,":",-1),xe={key:0};function _e(e,t,C,d,f,u){const o=Ve("clock");return R(),z("div",{class:T(e.classes(e.n(),e.formatElevation(e.elevation,2))),ref:"picker"},[j("div",{class:T(e.n("title")),style:Z({background:e.headerColor||e.color})},[j("div",{class:T(e.n("title-time"))},[j("div",{class:T(e.classes(e.n("title-btn"),[e.type==="hour",e.n("title-btn--active")])),onClick:t[0]||(t[0]=r=>e.checkPanel("hour"))},L(e.time.hour),3),Ze,j("div",{class:T(e.classes(e.n("title-btn"),[e.type==="minute",e.n("title-btn--active")])),onClick:t[1]||(t[1]=r=>e.checkPanel("minute"))},L(e.time.minute),3),e.useSeconds?(R(),z("span",xe,":")):x("",!0),e.useSeconds?(R(),z("div",{key:1,class:T(e.classes(e.n("title-btn"),[e.type==="second",e.n("title-btn--active")])),onClick:t[2]||(t[2]=r=>e.checkPanel("second"))},L(e.time.second),3)):x("",!0)],2),e.format==="ampm"?(R(),z("div",{key:0,class:T(e.n("title-ampm"))},[j("div",{class:T(e.classes(e.n("title-btn"),[e.ampm==="am",e.n("title-btn--active")])),onClick:t[3]||(t[3]=r=>e.checkAmpm("am"))},"AM",2),j("div",{class:T(e.classes(e.n("title-btn"),[e.ampm==="pm",e.n("title-btn--active")])),onClick:t[4]||(t[4]=r=>e.checkAmpm("pm"))},"PM",2)],2)):x("",!0)],6),j("div",{class:T(e.n("body"))},[j("div",{class:T(e.n("clock-container")),onTouchstart:t[5]||(t[5]=(...r)=>e.moveHand&&e.moveHand(...r)),onTouchmove:t[6]||(t[6]=(...r)=>e.moveHand&&e.moveHand(...r)),onTouchend:t[7]||(t[7]=(...r)=>e.end&&e.end(...r)),ref:"container"},[N(Ne,{name:`${e.n()}-panel-fade`},{default:E(()=>[(R(),pe(o,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))]),_:1},8,["name"])],34)],2)],2)}const X=de(Ke,[["render",_e]]);Be(X);const en={basicUsage:"基本使用",hour24:"24小时格式",readonly:"只读",timeLimit:"时间限制",custom:"自定义",showSecond:"显示秒"},nn={basicUsage:"Basic Usage",hour24:"24hr Format",readonly:"Readonly",timeLimit:"Time Limit",custom:"Custom",showSecond:"Show Seconds"},{add:ye,use:tn,pack:G,packs:dn,merge:cn}=ze(),on=e=>{Fe(e),tn(e)};fe("zh-CN",Le);fe("en-US",je);ye("zh-CN",en);ye("en-US",nn);const fn={__name:"index",setup(e){const t=ne({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22"}),C={hours:f=>f%2===0,minutes:f=>f%15!==0,seconds:f=>f%2!==0};function d(f){console.log(f)}return Ae(on),Pe(De),(f,u)=>(R(),z(ee,null,[N(w(W),null,{default:E(()=>[Y(L(w(G).basicUsage),1)]),_:1}),N(w(X),{modelValue:t.date,"onUpdate:modelValue":u[0]||(u[0]=o=>t.date=o)},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(L(w(G).hour24),1)]),_:1}),N(w(X),{modelValue:t.date1,"onUpdate:modelValue":u[1]||(u[1]=o=>t.date1=o),format:"24hr",elevation:""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(L(w(G).showSecond),1)]),_:1}),N(w(X),{modelValue:t.date5,"onUpdate:modelValue":u[2]||(u[2]=o=>t.date5=o),format:"24hr","use-seconds":""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(L(w(G).readonly),1)]),_:1}),N(w(X),{modelValue:t.date2,"onUpdate:modelValue":u[3]||(u[3]=o=>t.date2=o),readonly:"",elevation:""},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(L(w(G).timeLimit),1)]),_:1}),N(w(X),{modelValue:t.date3,"onUpdate:modelValue":u[4]||(u[4]=o=>t.date3=o),format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":C},null,8,["modelValue"]),N(w(W),null,{default:E(()=>[Y(L(w(G).custom),1)]),_:1}),N(w(X),{modelValue:t.date4,"onUpdate:modelValue":u[5]||(u[5]=o=>t.date4=o),elevation:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22",onChange:d},null,8,["modelValue"])],64))}};export{fn as default};
