import{B as oe}from"./index-281c4261.js";import{I as ae}from"./index-809bff45.js";import{F as te,u as re}from"./provide-49bdcacd.js";import{v as le}from"./index-9bf7cd1d.js";import{d as ie,r as se,D as H,a4 as o,G as ue,aY as S,n as de,_ as me,b as M,e as ce,m as fe,p as J,q as p,w as K,x as z,y as L,P as ge,aZ as he,aq as pe}from"./index-95102025.js";import{d as b,h as be,a as u,f as ve,c as ye,w as Se}from"./components-ee7ab657.js";import{a as ze}from"./elements-fed7d8fa.js";const Te={modelValue:{type:[String,Number],default:0},min:[String,Number],max:[String,Number],step:{type:[String,Number],default:1},color:String,inputWidth:[String,Number],inputTextSize:[String,Number],buttonSize:[String,Number],elevation:{type:[Boolean,Number,String],default:!0},decimalLength:[String,Number],disabled:Boolean,readonly:Boolean,disableIncrement:Boolean,disableDecrement:Boolean,disableInput:Boolean,lazyChange:Boolean,incrementButton:{type:Boolean,default:!0},decrementButton:{type:Boolean,default:!0},press:{type:Boolean,default:!0},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:()=>["onInputChange","onLazyChange","onIncrement","onDecrement"]},rules:Array,onBeforeChange:b(),onChange:b(),onIncrement:b(),onDecrement:b(),"onUpdate:modelValue":b()},O=100,Q=600,{name:Ce,n:Be,classes:Ve}=ye("counter"),De=ie({name:Ce,components:{VarButton:oe,VarIcon:ae,VarFormDetails:te},directives:{Ripple:le},inheritAttrs:!1,props:Te,setup(e){const d=se(""),{bindForm:E,form:F}=re(),{errorMessage:P,validateWithTrigger:$,validate:v,resetValidation:m}=be(),{readonly:s,disabled:r}=F??{},A=H(()=>{const{max:n,modelValue:a}=e;return n!=null&&o(a)>=o(n)}),W=H(()=>{const{min:n,modelValue:a}=e;return n!=null&&o(a)<=o(n)});let T,C,B,V;u(E,{reset:R,validate:q,resetValidation:m}),ue(()=>e.modelValue,n=>{f(c(String(n))),u(e.onChange,o(n))}),f(c(String(e.modelValue)));function q(){return v(e.rules,e.modelValue)}function y(n){de(()=>{const{validateTrigger:a,rules:l,modelValue:i}=e;$(a,n,l,i)})}function R(){const{min:n}=e;u(e["onUpdate:modelValue"],n!=null?o(n):0),m()}function c(n){const{decimalLength:a,max:l,min:i}=e;let t=o(n);return l!=null&&t>o(l)&&(t=o(l)),i!=null&&t<o(i)&&(t=o(i)),n=String(t),a!=null&&(n=t.toFixed(o(a))),n}function X(n){const{lazyChange:a,onBeforeChange:l}=e,{value:i}=n.target,t=c(i);a?u(l,o(t),D):f(t),y("onInputChange")}function Y(){const{disabled:n,readonly:a,disableDecrement:l,decrementButton:i,lazyChange:t,step:w,modelValue:I,onDecrement:N,onBeforeChange:U}=e;if(r!=null&&r.value||s!=null&&s.value||n||a||l||!i||W.value)return;const k=new S(o(I)).minus(new S(o(w))).toString(),g=c(k),h=o(g);u(N,h),t?u(U,h,D):(f(g),y("onDecrement"))}function G(){const{disabled:n,readonly:a,disableIncrement:l,incrementButton:i,lazyChange:t,step:w,modelValue:I,onIncrement:N,onBeforeChange:U}=e;if(r!=null&&r.value||s!=null&&s.value||n||a||l||!i||A.value)return;const k=new S(o(I)).plus(new S(o(w))).toString(),g=c(k),h=o(g);u(N,h),t?u(U,h,D):(f(g),y("onIncrement"))}function _(){const{press:n,lazyChange:a}=e;!n||a||(V=window.setTimeout(()=>{j()},Q))}function x(){const{press:n,lazyChange:a}=e;!n||a||(B=window.setTimeout(()=>{Z()},Q))}function ee(){C&&clearTimeout(C),V&&clearTimeout(V)}function ne(){T&&clearTimeout(T),B&&clearTimeout(B)}function Z(){T=window.setTimeout(()=>{G(),Z()},O)}function j(){C=window.setTimeout(()=>{Y(),j()},O)}function f(n){d.value=n;const a=o(n);u(e["onUpdate:modelValue"],a)}function D(n){f(c(String(n))),y("onLazyChange")}return{inputValue:d,errorMessage:P,formDisabled:r,formReadonly:s,isMax:A,isMin:W,n:Be,classes:Ve,formatElevation:ve,validate:q,reset:R,resetValidation:m,handleChange:X,decrement:Y,increment:G,pressDecrement:_,pressIncrement:x,releaseDecrement:ee,releaseIncrement:ne,toSizeUnit:ze,toNumber:o}}});const we=["inputmode","readonly","disabled"];function Ie(e,d,E,F,P,$){const v=M("var-icon"),m=M("var-button"),s=M("var-form-details");return ce(),fe("div",{class:z(e.classes(e.n(),e.n("$--box")))},[J("div",pe({class:e.classes(e.n("controller"),e.formatElevation(e.elevation,2),[e.disabled||e.formDisabled,e.n("--disabled")],[e.errorMessage,e.n("--error")]),style:{background:e.color?e.color:void 0}},e.$attrs),[p(m,{class:z(e.classes(e.n("decrement-button"),[!e.decrementButton,e.n("--hidden")],[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:L({width:e.toSizeUnit(e.buttonSize),height:e.toSizeUnit(e.buttonSize)}),round:"","var-counter-cover":"",ripple:e.ripple&&e.decrementButton&&!e.disabled&&!e.formDisabled&&!e.readonly&&!e.formReadonly&&!e.disableDecrement&&!e.isMin,onClick:e.decrement,onTouchstart:e.pressDecrement,onTouchend:e.releaseDecrement,onTouchcancel:e.releaseDecrement},{default:K(()=>[p(v,{name:"minus"})]),_:1},8,["class","style","ripple","onClick","onTouchstart","onTouchend","onTouchcancel"]),ge(J("input",{class:z(e.classes(e.n("input"),[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:L({width:e.toSizeUnit(e.inputWidth),fontSize:e.toSizeUnit(e.inputTextSize)}),inputmode:e.toNumber(e.decimalLength)===0?"numeric":"decimal",readonly:e.readonly||e.formReadonly,disabled:e.disabled||e.formDisabled||e.disableInput,"onUpdate:modelValue":d[0]||(d[0]=r=>e.inputValue=r),onChange:d[1]||(d[1]=(...r)=>e.handleChange&&e.handleChange(...r))},null,46,we),[[he,e.inputValue]]),p(m,{class:z(e.classes(e.n("increment-button"),[!e.incrementButton,e.n("--hidden")],[e.disabled||e.formDisabled,e.n("--not-allowed")])),style:L({width:e.toSizeUnit(e.buttonSize),height:e.toSizeUnit(e.buttonSize)}),round:"","var-counter-cover":"",ripple:e.ripple&&e.incrementButton&&!e.disabled&&!e.formDisabled&&!e.readonly&&!e.formReadonly&&!e.disableIncrement&&!e.isMax,onClick:e.increment,onTouchstart:e.pressIncrement,onTouchend:e.releaseIncrement,onTouchcancel:e.releaseIncrement},{default:K(()=>[p(v,{name:"plus"})]),_:1},8,["class","style","ripple","onClick","onTouchstart","onTouchend","onTouchcancel"])],16),p(s,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const Ne=me(De,[["render",Ie]]);Se(Ne);export{Ne as C};
