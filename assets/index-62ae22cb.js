import{d as B,r as Z,D as I,G as z,ar as J,_ as P,b as C,P as X,Y as x,e as b,m as nn,p as m,x as p,v as d,Q as q,R as D,f as h,t as N,y as L,q as k,w as g,aq as O,T as en,as as on,W as A,a5 as tn,ac as an,at as sn,a4 as j,au as rn,ao as ln}from"./index-95102025.js";import{p as v,L as cn}from"./index-7461e419.js";import{I as dn}from"./index-809bff45.js";import{u as un}from"./zIndex-786cbeb4.js";import{p as y,d as f,c as U,a as c,u as pn,m as fn,w as _}from"./components-ee7ab657.js";import{u as mn}from"./lock-a004129c.js";import{c as gn}from"./index-6f5cb71d.js";const G={type:String,position:{type:String,default:"top"},content:{type:[String,Function,Object]},contentClass:String,duration:{type:Number,default:3e3},vertical:Boolean,loadingType:y(v,"type"),loadingSize:y(v,"size"),loadingRadius:y(v,"radius"),loadingColor:{...y(v,"color"),default:"currentColor"},lockScroll:Boolean,show:Boolean,teleport:{type:[String,Object,Boolean],default:"body"},forbidClick:Boolean,onOpen:f(),onOpened:f(),onClose:f(),onClosed:f(),"onUpdate:show":f(),_update:String},{n:vn,classes:yn}=U("snackbar"),bn={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},kn=B({name:"VarSnackbarCore",components:{VarLoading:cn,VarIcon:dn},props:G,setup(n){const o=Z(null),{zIndex:e}=un(()=>n.show,1);mn(()=>n.show,()=>n.lockScroll);const s=I(()=>n.type==="loading"||n.forbidClick),t=I(()=>n.type?bn[n.type]:""),r=()=>{o.value=setTimeout(()=>{n.type!=="loading"&&c(n["onUpdate:show"],!1)},n.duration)};return z(()=>n.show,l=>{l?(c(n.onOpen),r()):l===!1&&(clearTimeout(o.value),c(n.onClose))}),z(()=>n._update,()=>{clearTimeout(o.value),r()}),J(()=>{n.show&&(c(n.onOpen),r())}),{SNACKBAR_TYPE:F,n:vn,classes:yn,zIndex:e,iconName:t,isForbidClick:s}}});function Sn(n,o,e,s,t,r){const l=C("var-icon"),S=C("var-loading");return X((b(),nn("div",{class:p(n.n()),style:L({pointerEvents:n.isForbidClick?"auto":"none",zIndex:n.zIndex})},[m("div",{class:p(n.classes(n.n("wrapper"),n.n(`wrapper-${n.position}`),n.n("$-elevation--4"),[n.vertical,n.n("vertical")],[n.type&&n.SNACKBAR_TYPE.includes(n.type),n.n(`wrapper-${n.type}`)])),style:L({zIndex:n.zIndex})},[m("div",{class:p([n.n("content"),n.contentClass])},[d(n.$slots,"default",{},()=>[q(D(n.content),1)])],2),m("div",{class:p([n.n("icon")])},[n.iconName?(b(),h(l,{key:0,name:n.iconName},null,8,["name"])):N("",!0),n.type==="loading"?(b(),h(S,{key:1,type:n.loadingType,size:n.loadingSize,color:n.loadingColor,radius:n.loadingRadius},null,8,["type","size","color","radius"])):N("",!0),d(n.$slots,"icon")],2),m("div",{class:p(n.n("action"))},[d(n.$slots,"action")],2)],6)],6)),[[x,n.show]])}const R=P(kn,[["render",Sn]]),{name:wn,n:Cn}=U("snackbar"),hn=B({name:wn,components:{VarSnackbarCore:R},props:G,setup(){const{disabled:n}=pn();return{disabled:n,n:Cn}}});function On(n,o,e,s,t,r){const l=C("var-snackbar-core");return b(),h(on,{to:n.teleport===!1?void 0:n.teleport,disabled:n.disabled||n.teleport===!1},[k(en,{name:`${n.n()}-fade`,onAfterEnter:n.onOpened,onAfterLeave:n.onClosed},{default:g(()=>[k(l,O(n.$props,{class:n.n("transition")}),{icon:g(()=>[d(n.$slots,"icon")]),action:g(()=>[d(n.$slots,"action")]),default:g(()=>[d(n.$slots,"default",{},()=>[q(D(n.content),1)])]),_:3},16,["class"])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}const E=P(hn,[["render",On]]);function $n(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!rn(n)}const F=["loading","success","warning","info","error"];let V=0,$=!1,M,u=!1;const Y={type:void 0,content:"",icon:"",action:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}};let a=A([]),T=Y;const An={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},w=n=>()=>ln(n)?n():n,En={setup(){return()=>{const n=a.map(({id:o,reactiveSnackOptions:e,_update:s})=>{const t=document.querySelector(".var-transition-group");e.forbidClick||e.type==="loading"?t.classList.add("var-pointer-auto"):t.classList.remove("var-pointer-auto"),u&&(e.position="top");const l={position:u?"relative":"absolute",...Vn(e.position)},{content:S,icon:K,action:H}=e,Q={default:w(S),icon:w(K),action:w(H)};return k(R,O(e,{key:o,style:l,"data-id":o,_update:s,show:e.show,"onUpdate:show":W=>e.show=W}),Q)});return k(sn,O(An,{style:{zIndex:gn.zIndex},onAfterEnter:Tn,onAfterLeave:In}),$n(n)?n:{default:()=>[n]})}}},i=function(n){const o=Nn(n),e=A({...T,...o});e.show=!0,$||($=!0,M=fn(En).unmountInstance);const{length:s}=a,t={id:V++,reactiveSnackOptions:e};if(s===0||u)zn(t);else{const r=`update-${V}`;Ln(e,r)}return{clear(){!u&&a.length?a[0].reactiveSnackOptions.show=!1:e.show=!1}}};F.forEach(n=>{i[n]=o=>(tn(o)?o.type=n:o={content:o,type:n},i(o))});i.allowMultiple=function(n=!1){n!==u&&(a.forEach(o=>{o.reactiveSnackOptions.show=!1}),u=n)};i.clear=function(){a.forEach(n=>{n.reactiveSnackOptions.show=!1})};i.setDefaultOptions=function(n){T=n};i.resetDefaultOptions=function(){T=Y};function Tn(n){const o=n.getAttribute("data-id"),e=a.find(s=>s.id===j(o));e&&c(e.reactiveSnackOptions.onOpened)}function In(n){n.parentElement&&n.parentElement.classList.remove("var-pointer-auto");const o=n.getAttribute("data-id"),e=a.find(t=>t.id===j(o));e&&(e.animationEnd=!0,c(e.reactiveSnackOptions.onClosed)),a.every(t=>t.animationEnd)&&(c(M),a=A([]),$=!1)}function zn(n){a.push(n)}function Nn(n={}){return an(n)?{content:n}:n}function Ln(n,o){const[e]=a;e.reactiveSnackOptions={...e.reactiveSnackOptions,...n},e._update=o}function Vn(n="top"){return n==="bottom"?{[n]:"5%"}:{top:n==="top"?"5%":"45%"}}i.Component=E;_(E);_(E,i);const Gn=i;export{Gn as S};
