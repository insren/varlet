import{I as A}from"./index-809bff45.js";import{F as E,u as X}from"./provide-49bdcacd.js";import{v as j}from"./index-9bf7cd1d.js";import{H as G,u as J}from"./index-b06a091b.js";import{v as K}from"./index-5b3cd96a.js";import{d as z,h as Q,a as v,c as Y,w as Z}from"./components-ee7ab657.js";import{a as D}from"./elements-fed7d8fa.js";import{d as x,r as ee,a4 as d,n as ae,_ as ne,b as S,L as F,e as V,m as H,p as re,N as oe,O as te,P as le,y as U,x as f,q as N}from"./index-95102025.js";const ie={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:String,icon:{type:String,default:"star"},emptyColor:String,emptyIcon:{type:String,default:"star-outline"},size:[String,Number],gap:[String,Number],namespace:String,half:Boolean,halfIcon:{type:String,default:"star-half-full"},disabled:Boolean,disabledColor:String,readonly:Boolean,ripple:{type:Boolean,default:!0},clearable:Boolean,rules:Array,onChange:z(),"onUpdate:modelValue":z()},{name:se,n:c}=Y("rate"),de=x({name:se,components:{VarIcon:A,VarFormDetails:E,VarHoverOverlay:G},directives:{Ripple:j,Hover:K},props:ie,setup(e){const g=ee(-1),{form:a,bindForm:_}=X(),{errorMessage:p,validateWithTrigger:k,validate:y,resetValidation:i}=Q(),{hovering:u}=J();let m=Number(e.modelValue);v(_,{reset:R,validate:B,resetValidation:i});function t(n){const{count:r,gap:o}=e;return{color:b(n).color,marginRight:n!==d(r)?D(o):0}}function h(n){const{name:r,color:o}=b(n);return{[c("content")]:!0,[c("--disabled")]:(a==null?void 0:a.disabled.value)||e.disabled,[c("--error")]:p.value,[c("--primary")]:r!==e.emptyIcon&&!o}}function b(n){const{modelValue:r,disabled:o,disabledColor:l,color:s,half:L,emptyColor:M,icon:T,halfIcon:W,emptyIcon:q}=e;let C=s;return(o||a!=null&&a.disabled.value)&&(C=l),n<=d(r)?{color:C,name:T}:L&&n<=d(r)+.5?{color:C,name:W}:{color:o||a!=null&&a.disabled.value?l:M,name:q}}function w(n,r){const{half:o,clearable:l}=e,{offsetWidth:s}=r.target;o&&r.offsetX<=Math.floor(s/2)&&(n-=.5),m===n&&l&&(n=0),m=n,v(e["onUpdate:modelValue"],n)}function B(){return y(e.rules,d(e.modelValue))}function O(){return ae(()=>k(["onChange"],"onChange",e.rules,e.modelValue))}function P(n,r){const{readonly:o,disabled:l,onChange:s}=e;o||l||a!=null&&a.disabled.value||a!=null&&a.readonly.value||(w(n,r),v(s,n),O())}function $(n){return r=>{g.value=n,u.value=r}}function R(){v(e["onUpdate:modelValue"],0),i()}return{errorMessage:p,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,hovering:u,currentHoveringValue:g,getStyle:t,getClass:h,getCurrentState:b,handleClick:P,createHoverHandler:$,reset:R,validate:B,resetValidation:i,toSizeUnit:D,toNumber:d,n:c}}});const ce=["onClick"];function ue(e,g,a,_,p,k){const y=S("var-icon"),i=S("var-hover-overlay"),u=S("var-form-details"),m=F("ripple"),I=F("hover");return V(),H("div",{class:f(e.n("wrap"))},[re("div",{class:f(e.n())},[(V(!0),H(oe,null,te(e.toNumber(e.count),t=>le((V(),H("div",{key:t,style:U(e.getStyle(t)),class:f(e.getClass(t)),onClick:h=>e.handleClick(t,h)},[N(y,{class:f(e.n("content-icon")),"var-rate-cover":"",transition:0,namespace:e.namespace,name:e.getCurrentState(t).name,style:U({fontSize:e.toSizeUnit(e.size)})},null,8,["class","namespace","name","style"]),N(i,{hovering:e.hovering&&t===e.currentHoveringValue&&!e.disabled&&!e.formDisabled},null,8,["hovering"])],14,ce)),[[m,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}],[I,e.createHoverHandler(t),"desktop"]])),128))],2),N(u,{"error-message":e.errorMessage},null,8,["error-message"])],2)}const me=ne(de,[["render",ue]]);Z(me);export{me as R};
